<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Posts | Liang&#39;s Blog</title>
<meta name="keywords" content="index">
<meta name="description" content="Posts - Liang&#39;s Blog">
<meta name="author" content="lee.so">
<link rel="canonical" href="https://liang512.github.io/post/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css" integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://liang512.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://liang512.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://liang512.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://liang512.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://liang512.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://liang512.github.io/post/index.xml">
<link rel="alternate" hreflang="en" href="https://liang512.github.io/post/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          
          
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '$', right: '$', display: false},
              {left: '\\(', right: '\\)', display: false},
              {left: '\\[', right: '\\]', display: true}
          ],
          
          throwOnError : false
        });
    });
</script>
<meta property="og:title" content="Posts" />
<meta property="og:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://liang512.github.io/post/" />
<meta property="og:image" content="https://liang512.github.io/papermod-cover.png" />


<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://liang512.github.io/papermod-cover.png" />
<meta name="twitter:title" content="Posts"/>
<meta name="twitter:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://liang512.github.io/post/"
    }
  ]
}
</script>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://liang512.github.io/" accesskey="h" title="Liang&#39;s Blog (Alt + H)">Liang&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://liang512.github.io/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://liang512.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://liang512.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://liang512.github.io/friends/" title="Friends">
                    <span>Friends</span>
                </a>
            </li>
            <li>
                <a href="https://liang512.github.io/about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/adityatelange/hugo-PaperMod/wiki/" title="WiKi">
                    <span>WiKi</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="https://liang512.github.io/">Home</a></div>
  <h1>
    Posts
    <a href="/post/index.xml" title="RSS" aria-label="RSS">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round" height="23">
        <path d="M4 11a9 9 0 0 1 9 9" />
        <path d="M4 4a16 16 0 0 1 16 16" />
        <circle cx="5" cy="19" r="1" />
      </svg>
    </a>
  </h1>
</header>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Revocation
    </h2>
  </header>
  <div class="entry-content">
    <p>灵活撤销 Direct revocation The DO encrypts files with a separate revocation list (as a policy), preventing revoked users from decrypting the ciphertext while non-revoked DUs remain unaffected. However, all DOs must maintain an ever-growing revocation list, increasing ciphertext size over time. Limitations:
Ciphertext size is linearly increasing with the number of revoked users. Users are represented with a unique ID. No anonymous. Indirect revocation A timestamp is embedded in the ciphertext, and the KGC periodically updates the private keys of non-revoked DUs. Revoked DUs cannot obtain valid key updates to decrypt future ciphertexts. Q: The revoked users can decrypt past ciphertexts they were originally allowed to.
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-01-23 22:51:58 +0800 +0800'>January 23, 2025</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Me</footer>
  <a class="entry-link" aria-label="post link to Revocation" href="https://liang512.github.io/post/research/revocation/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">NewProblem
    </h2>
  </header>
  <div class="entry-content">
    <p>20241201 Aggregating knowledge graphs from multiple users
抗量子ABKS
VIPMatch: Verifiable, Inclusive, and Privacy-Enhanced Crowdsourcing Task Matching Based on Blockchain
V-PEAKS: Verifiable, Policy-Hiding, and Expressive Attribute-Based Encryption Scheme with Keyword Search
Verifiable search results Partially hidden policy (attributes divided into public attribute names and hidden attribute values) Expressive access control and keyword search, represented as conjunctions, disjunctions, or any Boolean formulas with numeric attribute comparison. </p>
  </div>
  <footer class="entry-footer"><span title='2024-10-29 19:03:40 +0800 +0800'>October 29, 2024</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Me</footer>
  <a class="entry-link" aria-label="post link to NewProblem" href="https://liang512.github.io/post/research/newproblem/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Blockchain-based access control
    </h2>
  </header>
  <div class="entry-content">
    <p> Summary Table HS: Hybrid Storage, OD: Outsourced Decryption, PP: Privacy of Policy, PA: Privacy of Attributes, VDI: Verification of Data Integrity, VAP: Verification of Access Permission, PV: Public verification, SA: Sanitization, RE: Revocation, KS: Keyword Search VT: Verification of Transformation by CS
Paper HS OD PP PA VDI VAP PV SA RE KS 1 Xiao2022 ✅ ❌ ❌ ❌ ✅ ✅ VAP ❌ ✅ ❌ 2 Zhang2022 ✅ ❌ ✅ ✅ ✅ ✅ VAP ❌ ❌ ❌ 3 Guo2023 ✅ ✅ ❌ ❌ ✅ ❌ ❌ ❌ ✅ ❌ 4 Li2024 ❌(without CS) ✅ ✅ ✅ ✅ ✅ both ❌ ❌ ✅ 5 Jiang2024 ✅ ❌ ❌ ❌ ❌ ❌ ❌ ✅ ❌ ❌ 6 He2022 ✅ ❌ ❌ ❌ ❌ ❌ ❌ ❌ ❌ ❌ 7 Yan2023 ❌ ✅ ✅ ❓ ✅ ✅ ✅ ❌ ❌ ✅ 8 Zhao2023 ✅ ✅ ❌ ❌ ✅ ❌ ❌ ❌ ❌ ❌ 9 Fan2020 ✅ ✅ ✅ ✅ ✅ ❌ ❌ ❌ ❌ ❌ 10 Cui2020 ✅ ✅ ❌ ❌ ✅ ✅ both ❌ ❌ ❌ 11 Yang2023 ✅ ✅ ❌ ❌ ✅ ✅ ❌ ❌ ✅ ❌ 12 Gan2023 ✅ ❌ ❌ ❌ ✅ ❌ ❌ ❌ ❌ ❌ 13 Hou2024 ✅ ✅ ❌ ❌ ✅ ✅ both ❌ ❌ ❌ 14 Jiang2022 ✅ ✅ ❌ ❌ ✅ ❌ ❌ ❌ ✅ ❌ 15 Guo2023 ✅ ✅ ❌ ❌ ❌ ❌ ❌ ❌ ✅ ❌ Blockchain Based Multi-Authority Fine-Grained Access Control System With Flexible Revocation Meiyan Xiao , Qiong Huang , Member, IEEE, Ying Miao, Shunpeng Li, and Willy Susilo , Fellow, IEEE; IEEE TRANSACTIONS ON SERVICES COMPUTING (TSC CCF A) 2022
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-09-22 18:54:01 +0800 +0800'>September 22, 2024</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;LiangLi</footer>
  <a class="entry-link" aria-label="post link to Blockchain-based access control" href="https://liang512.github.io/post/research/blockchainaccess_abe/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Add a Peer Node to an Organization
    </h2>
  </header>
  <div class="entry-content">
    <p>1. Generate crypto material for new peer Modify the script test-network/organizations/fabric-ca/registerEnroll.sh to add the configuration of peer1:
infoln &#34;Registering peer1&#34; set -x fabric-ca-client register --caname ca-org1 --id.name peer1 --id.secret peer1pw --id.type peer --tls.certfiles ${PWD}/organizations/fabric-ca/org1/tls-cert.pem { set &#43;x; } 2&gt;/dev/null infoln &#34;Generating the peer1 msp&#34; set -x fabric-ca-client enroll -u https://peer1:peer1pw@localhost:7054 --caname ca-org1 -M ${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer1.org1.example.com/msp --csr.hosts peer1.org1.example.com --tls.certfiles ${PWD}/organizations/fabric-ca/org1/tls-cert.pem { set &#43;x; } 2&gt;/dev/null cp ${PWD}/organizations/peerOrganizations/org1.example.com/msp/config.yaml ${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer1.org1.example.com/msp/config.yaml infoln &#34;Generating the peer1-tls certificates&#34; set -x fabric-ca-client enroll -u https://peer1:peer1pw@localhost:7054 --caname ca-org1 -M ${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer1.org1.example.com/tls --enrollment.profile tls --csr.hosts peer1.org1.example.com --csr.hosts localhost --tls.certfiles ${PWD}/organizations/fabric-ca/org1/tls-cert.pem { set &#43;x; } 2&gt;/dev/null cp ${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer1.org1.example.com/tls/tlscacerts/* ${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer1.org1.example.com/tls/ca.crt cp ${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer1.org1.example.com/tls/signcerts/* ${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer1.org1.example.com/tls/server.crt cp ${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer1.org1.example.com/tls/keystore/* ${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer1.org1.example.com/tls/server.key cp ${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer1.org1.example.com/tls/tlscacerts/* ${PWD}/organizations/peerOrganizations/org1.example.com/msp/tlscacerts/ca.crt cp ${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer1.org1.example.com/tls/tlscacerts/* ${PWD}/organizations/peerOrganizations/org1.example.com/tlsca/tlsca.org1.example.com-cert.pem cp ${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer1.org1.example.com/msp/cacerts/* ${PWD}/organizations/peerOrganizations/org1.example.com/ca/ca.org1.example.com-cert.pem Then, we can see that the MSP files of peer1 are generated in test-network/organizations/peerOrganizations/org1.example.com/peers/peer1.org1.example.com/msp. These files identify the identity of peer1.
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-01-28 21:33:52 +0800 +0800'>January 28, 2024</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Liang Li</footer>
  <a class="entry-link" aria-label="post link to Add a Peer Node to an Organization" href="https://liang512.github.io/post/hyperledgerfabric/addpeer/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Scheme
    </h2>
  </header>
  <div class="entry-content">
    <p>1 Attribute vector $v$ -&gt; $g^v$ Policy vector $x$ -&gt; $rx$, where $r\leftarrow Z_p$ Verify $g^{v\cdot rx}=g^0$ System Model Requester is semi-honest, which means that they honestly perform protocol but may attempt to learn the privacy of other users.
Worker may claim the honest CS doesn’t return correct matching tasks. 想要申请自己不满足任务需求的任务，栽赃服务器返回了错误的结果； keyword; collude
Server：为了节省算力返回错误的匹配结果;篡改密文
public verifiable outsourced ABE: Worker 拒绝任务后可通过proof验证 Server进行了正确匹配；
Verifiability: 对于Worker是否满足Requester制定的访问策略，可将双方的属性向量（任务访问策略向量）秘密共享or使用同态commitment：
对向量$v=(v_0,v_1,v_2)$: Authority授权密钥时声称向量对应位置的commitment。如$AU_0$计算$Com(v_0)=g^{v_0}h^{r_0}$，最后将$Coms=(Com(v_0), Com(v_1), Com(v_2))$发送到区块链存储。 对向量$x(x_0,x_1,x_2)$: 利用Two-party secret sharing，首先Requester对$x$进行两方的加法秘密共享$x_0 = x_0^1&#43;x_0^2$… 验证：$Com(v_0,r_0)^{x_0^1}\cdot Com(v_0,r_0)^{x_0^2}=Com(v_0\cdot x_0,r_0\cdot x_0)$ $\prod \limits_{i=0}^2 Com(v_i x_i)=Com(0)$ 忽略了随机数r ，$Com(v_0,r_0)^{x_0^1}\cdot Com(v_0,r_0)^{x_0^2}=Com(v_0\cdot x_0,r_0\cdot x_0)$ $\prod \limits_{i=0}^2 Com(v_i x_i)=g^{v\cdot x}h^{\sum \limits_{i=0}^n r_i\cdot x_i}=g^0\cdot h^{{\sum \limits_{i=0}^n r_i\cdot x_i}}$ 对于Worker是否满足Requester制定的访问策略，可将双方的属性向量（任务访问策略向量）秘密共享or使用同态commitment：
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-01-24 10:39:25 +0800 +0800'>January 24, 2024</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Me</footer>
  <a class="entry-link" aria-label="post link to Scheme" href="https://liang512.github.io/post/research/scheme/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Sanitizable Encryption
    </h2>
  </header>
  <div class="entry-content">
    <p> Sanitizable Access Control System for Secure Cloud Storage Against Malicious Data Publishers 1 这篇文章考虑加密者（Data Owner,DO）恶意的情况时，如何保证数据的隐私性。
我们首先要清楚恶意的DO会做什么事情：
嵌入错误的访问策略让无权限的用户解密；
将密钥泄露给无权限的用户；
对以上的1，增加一个可信的Sanitizer在密文上执行check操作，检查是否嵌入了正确的访问策略，其实相当于执行了一遍ABE的解密操作，将与访问策略$M$关联的密文组件与随机选择的属性集合$S\in M$对应的密钥（这个密钥并不是authority生成，而是sanitizer按照密钥形式仿造的，仅为了验证）配对,通过验证则为正确的密文，此时的密文解密需要恢复出$e(g,g)^{\alpha s}$；
通过上述访问策略验证后，还需考虑DO直接将加密密钥泄露给无权限的用户。可信的sanitizer重新生成一个密文(访问策略秘密值为$s\prime$)，然后将两个密文聚合在一起，此时的密文解密需要恢复出$e(g,g)^{\alpha (s&#43;s’)}$；
问题：
对以上的1，随机选择的属性集合$S$满足访问策略是否可以确定密文就正确：例如DO声称访问策略为M=“A”，但是在加密时使用错误的访问策略$M’$=“A or B”，在check时随机选择的属性集合为${ A }$，也可以通过验证，但是此时携带有属性B的私钥的用户也可以解密。并未解决第一个问题。 泄漏访问策略，不具备匿名性 Sanitizable Cross-System Authorization for Secure Communication in Intelligent Connected Vehicle 2 对IBE的密文，可以解决第一个问题 A Sanitizable Access Control With Policy-Protection for Vehicular Social Networks 3 访问策略是AND-Gate，可以解决第一个问题 Verifiable Outsourced Attribute-Based Encryption Scheme for Cloud-Assisted Mobile E-health System 4 将外包加密与这个场景结合，服务器需要将访问策略嵌入密文，sanitizer检测服务器输出的密文是否正确，这个应用场景比上面那个更贴切生活一些。
check密文时仍然存在和第一篇一样的问题 访问策略的泄漏 Secure and Fine-Grained Flow Control for Subscription-Based Data Services Access control encryption based on KP-ABE.
...</p>
  </div>
  <footer class="entry-footer"><span title='2023-07-24 14:58:50 +0800 +0800'>July 24, 2023</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Liang Li</footer>
  <a class="entry-link" aria-label="post link to Sanitizable Encryption" href="https://liang512.github.io/post/sanitizable_abe/sanitizableencryption/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="next" href="https://liang512.github.io/post/page/2/">Next&nbsp;&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://liang512.github.io/">Liang&#39;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
